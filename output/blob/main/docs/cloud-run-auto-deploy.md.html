<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>personal-web-2025/docs/cloud-run-auto-deploy.md at main</title>
    <style>
        
        :root {
          --c-indigo-1: #3451b2;
          --c-indigo-2: #3a5ccc;
          --c-indigo-3: #5672cd;
          --c-green: #1a7f37;
          --c-red: #c53030;
          --c-yellow: #9a6700;
          --c-dir: #54aeff;
          --c-gray-soft: rgba(142, 150, 170, .14);
          --c-bg: #ffffff;
          --c-bg-alt: #f6f6f7;
          --c-bg-elv: #ffffff;
          --c-text-1: rgba(60, 60, 67);
          --c-text-2: rgba(60, 60, 67, .78);
          --c-text-3: rgba(60, 60, 67, .56);
          --c-border: #c2c2c4;
          --c-divider: #e2e2e3;
        }

        

        :root {
          --c-brand-1: var(--c-indigo-1);
          --c-brand-2: var(--c-indigo-2);
          --c-brand-3: var(--c-indigo-3);
          --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
          --font-family-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
          --code-line-height: 20px;
          --code-font-size: 12px;
          --code-color: var(--c-brand-1);
          --code-bg: var(--c-gray-soft);
          --code-block-bg: var(--c-bg-alt);
          --code-block-color: var(--c-text-1);
          --header-height: 46px;
          --border-radius: 6px;
          --max-content-width: 1470px;
        }

        * {
          box-sizing: border-box;
        }

        body {
          margin: 0;
          padding: 0;
          font-family: var(--font-family), sans-serif;
          font-size: 14px;
          line-height: 1;
          color: var(--c-text-1);
          background-color: var(--c-bg);
          text-rendering: optimizeLegibility;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          -moz-text-size-adjust: none;
          -webkit-text-size-adjust: none;
          text-size-adjust: none;
          min-height: 100vh;
          display: flex;
          flex-direction: column;
        }

        .nowrap {
          white-space: nowrap;
        }

        h1 {
          margin-inline: 0;
          margin-block: 16px;
          font-size: 20px;
          font-weight: 600;
        }

        a {
          color: var(--c-brand-1);
          font-weight: 500;
          text-decoration: underline;
          text-underline-offset: 2px;
          text-decoration: inherit;
          touch-action: manipulation;
        }

        a:hover {
          color: var(--c-brand-2);
          text-decoration: underline;
        }

        .menu {
          background-color: var(--c-bg-alt);
          border-bottom: 1px solid var(--c-divider);
          overflow-x: auto;
        }

        .menu-content {
          display: flex;
          flex-direction: row;
          align-items: center;
          gap: 16px;
          padding-inline: 16px;
          max-width: var(--max-content-width);
          margin-inline: auto;
        }

        .menu-item {
          display: flex;
          align-items: center;
          border-bottom: 2px solid transparent;
          height: 56px;
          padding-inline: 8px;
        }

        .menu-item a {
          display: flex;
          flex-direction: row;
          gap: 8px;
          align-items: center;
          color: var(--c-text-1);
          padding: 8px 10px;
          border-radius: 4px;
        }

        .menu-item a:hover {
          background-color: var(--c-bg-elv);
          text-decoration: none;
        }

        .menu-item.selected {
          border-bottom-color: var(--c-brand-1);
        }

        .project-name {
          font-weight: 600;
          font-size: 16px;
          margin-inline: 16px;
          color: var(--c-text-1);
          text-decoration: none;
        }

        main {
          flex-grow: 1;
          width: 100%;
          max-width: var(--max-content-width);
          margin: 16px auto;
        }

        .main-content {
          padding-inline: 16px;
        }

        footer {
          padding: 12px 16px;
          background-color: var(--c-bg-alt);
          border-top: 1px solid var(--c-divider);
          color: var(--c-text-3);
          font-size: 12px;
          text-align: center;
        }

        .header-container {
          container-type: scroll-state;
          position: sticky;
          top: 0;
        }

        .header-container {
          @container scroll-state(stuck: top) {
            header {
              border-top: none;
              border-top-left-radius: 0;
              border-top-right-radius: 0;
            }

            .goto-top {
              display: flex;
            }
          }
        }

        header {
          display: flex;
          flex-direction: row;
          align-items: center;
          min-height: var(--header-height);
          padding-inline: 16px;
          background: var(--c-bg-alt);
          border: 1px solid var(--c-border);
          border-top-left-radius: var(--border-radius);
          border-top-right-radius: var(--border-radius);
        }

        header h1 {
          word-break: break-all;
          font-weight: 600;
          font-size: 16px;
          margin: 0;
          padding: 0;
        }

        .header-ref {
          color: var(--c-text-2);
          border: 1px solid var(--c-border);
          border-radius: 6px;
          padding: 6px 10px;
          margin-right: 10px;
          margin-left: -6px;
        }

        header .path {
          font-size: 16px;
        }

        .breadcrumbs {
          display: flex;
          flex-direction: row;
          flex-wrap: wrap;
          gap: 6px;
          font-size: 16px;
        }

        .breadcrumbs a {
          word-break: break-all;
        }

        .goto-top {
          display: none;
          margin-left: auto;
          padding: 6px 10px;
          background: none;
          border: none;
          border-radius: 6px;
          gap: 4px;
          align-items: center;
          color: var(--c-text-1);
          cursor: pointer;
        }

        .goto-top:hover {
          background: var(--c-bg-elv);
        }
    </style>
    
    <style>
      [id] {
        scroll-margin-top: var(--header-height);
      }

      .markdown-container {
        border: 1px solid var(--c-divider);
        border-top: none;
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
        overflow-x: auto;
      }

      .markdown-body {
        width: 100%;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 32px;
        word-wrap: break-word;
        font-size: 16px;
        line-height: 1.5;
      }

      @media (max-width: 767px) {
        .markdown-body {
          padding: 16px;
        }
      }

      .markdown-body details,
.markdown-body figcaption,
.markdown-body figure {
  display: block;
}

.markdown-body summary {
  display: list-item;
}

.markdown-body [hidden] {
  display: none !important;
}

.markdown-body a {
  background-color: transparent;
  text-decoration: none;
}

.markdown-body abbr[title] {
  border-bottom: none;
  text-decoration: underline dotted;
}

.markdown-body b,
.markdown-body strong {
  font-weight: 600;
}

.markdown-body dfn {
  font-style: italic;
}

.markdown-body h1 {
  margin: .67em 0;
  font-weight: 600;
  padding-bottom: .3em;
  font-size: 2em;
  border-bottom: 1px solid #d1d9e0b3;
}

.markdown-body mark {
  background-color: #fff8c5;
  color: #1f2328;
}

.markdown-body small {
  font-size: 90%;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body sup {
  top: -0.5em;
}

.markdown-body img {
  border-style: none;
  max-width: 100%;
  box-sizing: content-box;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace;
  font-size: 1em;
}

.markdown-body figure {
  margin: 1em 2.5rem;
}

.markdown-body hr {
  box-sizing: content-box;
  overflow: hidden;
  border-bottom: 1px solid #d1d9e0b3;
  height: .25em;
  padding: 0;
  margin: 1.5rem 0;
  background-color: #d1d9e0;
}

.markdown-body input {
  font: inherit;
  margin: 0;
  overflow: visible;
  line-height: inherit;
}

.markdown-body [type=button],
.markdown-body [type=reset],
.markdown-body [type=submit] {
  -webkit-appearance: button;
  appearance: button;
}

.markdown-body [type=checkbox],
.markdown-body [type=radio] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body [type=number]::-webkit-inner-spin-button,
.markdown-body [type=number]::-webkit-outer-spin-button {
  height: auto;
}

.markdown-body [type=search]::-webkit-search-cancel-button,
.markdown-body [type=search]::-webkit-search-decoration {
  -webkit-appearance: none;
  appearance: none;
}

.markdown-body ::-webkit-input-placeholder {
  color: inherit;
  opacity: .54;
}

.markdown-body ::-webkit-file-upload-button {
  -webkit-appearance: button;
  appearance: button;
  font: inherit;
}

.markdown-body a:hover {
  text-decoration: underline;
}

.markdown-body ::placeholder {
  color: #59636e;
  opacity: 1;
}

.markdown-body hr::before {
  display: table;
  content: "";
}

.markdown-body hr::after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body table {
  border-spacing: 0;
  border-collapse: collapse;
  display: block;
  width: max-content;
  max-width: 100%;
  overflow: auto;
  font-variant: tabular-nums;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body details summary {
  cursor: pointer;
}

.markdown-body a:focus,
.markdown-body [role=button]:focus,
.markdown-body input[type=radio]:focus,
.markdown-body input[type=checkbox]:focus {
  outline: 2px solid #0969da;
  outline-offset: -2px;
  box-shadow: none;
}

.markdown-body a:focus:not(:focus-visible),
.markdown-body [role=button]:focus:not(:focus-visible),
.markdown-body input[type=radio]:focus:not(:focus-visible),
.markdown-body input[type=checkbox]:focus:not(:focus-visible) {
  outline: solid 1px transparent;
}

.markdown-body a:focus-visible,
.markdown-body [role=button]:focus-visible,
.markdown-body input[type=radio]:focus-visible,
.markdown-body input[type=checkbox]:focus-visible {
  outline: 2px solid #0969da;
  outline-offset: -2px;
  box-shadow: none;
}

.markdown-body a:not([class]):focus,
.markdown-body a:not([class]):focus-visible,
.markdown-body input[type=radio]:focus,
.markdown-body input[type=radio]:focus-visible,
.markdown-body input[type=checkbox]:focus,
.markdown-body input[type=checkbox]:focus-visible {
  outline-offset: 0;
}

.markdown-body kbd {
  display: inline-block;
  padding: 0.25rem;
  font: 11px ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
  line-height: 10px;
  color: #1f2328;
  vertical-align: middle;
  background-color: #f6f8fa;
  border: solid 1px #d1d9e0b3;
  border-bottom-color: #d1d9e0b3;
  border-radius: 6px;
  box-shadow: inset 0 -1px 0 #d1d9e0b3;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 1rem;
  font-weight: 600;
  line-height: 1.25;
}

.markdown-body h2 {
  font-weight: 600;
  padding-bottom: .3em;
  font-size: 1.5em;
  border-bottom: 1px solid #d1d9e0b3;
}

.markdown-body h3 {
  font-weight: 600;
  font-size: 1.25em;
}

.markdown-body h4 {
  font-weight: 600;
  font-size: 1em;
}

.markdown-body h5 {
  font-weight: 600;
  font-size: .875em;
}

.markdown-body h6 {
  font-weight: 600;
  font-size: .85em;
  color: #59636e;
}

.markdown-body p {
  margin-top: 0;
  margin-bottom: 10px;
}

.markdown-body blockquote {
  margin: 0;
  padding: 0 1em;
  color: #59636e;
  border-left: .25em solid #d1d9e0;
}

.markdown-body ul,
.markdown-body ol {
  margin-top: 0;
  margin-bottom: 0;
  padding-left: 2em;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body tt,
.markdown-body code,
.markdown-body samp {
  font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
  font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
  font-size: 12px;
  word-wrap: normal;
}

.markdown-body .octicon {
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-body input::-webkit-outer-spin-button,
.markdown-body input::-webkit-inner-spin-button {
  margin: 0;
  appearance: none;
}

.markdown-body .mr-2 {
  margin-right: 0.5rem !important;
}

.markdown-body::before {
  display: table;
  content: "";
}

.markdown-body::after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body > *:first-child {
  margin-top: 0 !important;
}

.markdown-body > *:last-child {
  margin-bottom: 0 !important;
}

.markdown-body a:not([href]) {
  color: inherit;
  text-decoration: none;
}

.markdown-body .absent {
  color: #d1242f;
}

.markdown-body .anchor {
  float: left;
  padding-right: 0.25rem;
  margin-left: -20px;
  line-height: 1;
}

.markdown-body .anchor:focus {
  outline: none;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body details {
  margin-top: 0;
  margin-bottom: 1rem;
}

.markdown-body blockquote > :first-child {
  margin-top: 0;
}

.markdown-body blockquote > :last-child {
  margin-bottom: 0;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
  color: #1f2328;
  vertical-align: middle;
  visibility: hidden;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
  text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
  visibility: visible;
}

.markdown-body h1 tt,
.markdown-body h1 code,
.markdown-body h2 tt,
.markdown-body h2 code,
.markdown-body h3 tt,
.markdown-body h3 code,
.markdown-body h4 tt,
.markdown-body h4 code,
.markdown-body h5 tt,
.markdown-body h5 code,
.markdown-body h6 tt,
.markdown-body h6 code {
  padding: 0 .2em;
  font-size: inherit;
}

.markdown-body summary h1,
.markdown-body summary h2,
.markdown-body summary h3,
.markdown-body summary h4,
.markdown-body summary h5,
.markdown-body summary h6 {
  display: inline-block;
}

.markdown-body summary h1 .anchor,
.markdown-body summary h2 .anchor,
.markdown-body summary h3 .anchor,
.markdown-body summary h4 .anchor,
.markdown-body summary h5 .anchor,
.markdown-body summary h6 .anchor {
  margin-left: -40px;
}

.markdown-body summary h1,
.markdown-body summary h2 {
  padding-bottom: 0;
  border-bottom: 0;
}

.markdown-body ul.no-list,
.markdown-body ol.no-list {
  padding: 0;
  list-style-type: none;
}

.markdown-body ol[type="a s"] {
  list-style-type: lower-alpha;
}

.markdown-body ol[type="A s"] {
  list-style-type: upper-alpha;
}

.markdown-body ol[type="i s"] {
  list-style-type: lower-roman;
}

.markdown-body ol[type="I s"] {
  list-style-type: upper-roman;
}

.markdown-body ol[type="1"] {
  list-style-type: decimal;
}

.markdown-body div > ol:not([type]) {
  list-style-type: decimal;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li > p {
  margin-top: 1rem;
}

.markdown-body li + li {
  margin-top: .25em;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 1rem;
  font-size: 1em;
  font-style: italic;
  font-weight: 600;
}

.markdown-body dl dd {
  padding: 0 1rem;
  margin-bottom: 1rem;
}

.markdown-body table th {
  font-weight: 600;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #d1d9e0;
}

.markdown-body table td > :last-child {
  margin-bottom: 0;
}

.markdown-body table tr {
  background-color: #ffffff;
  border-top: 1px solid #d1d9e0b3;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f6f8fa;
}

.markdown-body table img {
  background-color: transparent;
}

.markdown-body img[align=right] {
  padding-left: 20px;
}

.markdown-body img[align=left] {
  padding-right: 20px;
}

.markdown-body .emoji {
  max-width: none;
  vertical-align: text-top;
  background-color: transparent;
}

.markdown-body span.frame {
  display: block;
  overflow: hidden;
}

.markdown-body span.frame > span {
  display: block;
  float: left;
  width: auto;
  padding: 7px;
  margin: 13px 0 0;
  overflow: hidden;
  border: 1px solid #d1d9e0;
}

.markdown-body span.frame span img {
  display: block;
  float: left;
}

.markdown-body span.frame span span {
  display: block;
  padding: 5px 0 0;
  clear: both;
  color: #1f2328;
}

.markdown-body span.align-center {
  display: block;
  overflow: hidden;
  clear: both;
}

.markdown-body span.align-center > span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: center;
}

.markdown-body span.align-center span img {
  margin: 0 auto;
  text-align: center;
}

.markdown-body span.align-right {
  display: block;
  overflow: hidden;
  clear: both;
}

.markdown-body span.align-right > span {
  display: block;
  margin: 13px 0 0;
  overflow: hidden;
  text-align: right;
}

.markdown-body span.align-right span img {
  margin: 0;
  text-align: right;
}

.markdown-body span.float-left {
  display: block;
  float: left;
  margin-right: 13px;
  overflow: hidden;
}

.markdown-body span.float-left span {
  margin: 13px 0 0;
}

.markdown-body span.float-right {
  display: block;
  float: right;
  margin-left: 13px;
  overflow: hidden;
}

.markdown-body span.float-right > span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: right;
}

.markdown-body code,
.markdown-body tt {
  padding: .2em .4em;
  margin: 0;
  font-size: 85%;
  white-space: break-spaces;
  background-color: #818b981f;
  border-radius: 6px;
}

.markdown-body code br,
.markdown-body tt br {
  display: none;
}

.markdown-body del code {
  text-decoration: inherit;
}

.markdown-body samp {
  font-size: 85%;
}

.markdown-body pre code {
  font-size: 100%;
}

.markdown-body pre > code {
  padding: 0;
  margin: 0;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .highlight {
  margin-bottom: 1rem;
}

.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body .highlight pre,
.markdown-body pre {
  padding: 1rem;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  color: #1f2328;
  background-color: #f6f8fa;
  border-radius: 6px;
}

.markdown-body pre code,
.markdown-body pre tt {
  display: inline;
  max-width: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body .csv-data td,
.markdown-body .csv-data th {
  padding: 5px;
  overflow: hidden;
  font-size: 12px;
  line-height: 1;
  text-align: left;
  white-space: nowrap;
}

.markdown-body .csv-data .blob-num {
  padding: 10px 0.5rem 9px;
  text-align: right;
  background: #ffffff;
  border: 0;
}

.markdown-body .csv-data tr {
  border-top: 0;
}

.markdown-body .csv-data th {
  font-weight: 600;
  background: #f6f8fa;
  border-top: 0;
}

.markdown-body [data-footnote-ref]::before {
  content: "[";
}

.markdown-body [data-footnote-ref]::after {
  content: "]";
}

.markdown-body .footnotes {
  font-size: 12px;
  color: #59636e;
  border-top: 1px solid #d1d9e0;
}

.markdown-body .footnotes ol {
  padding-left: 1rem;
}

.markdown-body .footnotes ol ul {
  display: inline-block;
  padding-left: 1rem;
  margin-top: 1rem;
}

.markdown-body .footnotes li {
  position: relative;
}

.markdown-body .footnotes li:target::before {
  position: absolute;
  top: calc(0.5rem * -1);
  right: calc(0.5rem * -1);
  bottom: calc(0.5rem * -1);
  left: calc(1.5rem * -1);
  pointer-events: none;
  content: "";
  border: 2px solid #0969da;
  border-radius: 6px;
}

.markdown-body .footnotes li:target {
  color: #1f2328;
}

.markdown-body .footnotes .data-footnote-backref g-emoji {
  font-family: monospace;
}

.markdown-body .pl-c {
  color: #59636e;
}

.markdown-body .pl-c1,
.markdown-body .pl-s .pl-v {
  color: #0550ae;
}

.markdown-body .pl-e,
.markdown-body .pl-en {
  color: #6639ba;
}

.markdown-body .pl-smi,
.markdown-body .pl-s .pl-s1 {
  color: #1f2328;
}

.markdown-body .pl-ent {
  color: #0550ae;
}

.markdown-body .pl-k {
  color: #cf222e;
}

.markdown-body .pl-s,
.markdown-body .pl-pds,
.markdown-body .pl-s .pl-pse .pl-s1,
.markdown-body .pl-sr,
.markdown-body .pl-sr .pl-cce,
.markdown-body .pl-sr .pl-sre,
.markdown-body .pl-sr .pl-sra {
  color: #0a3069;
}

.markdown-body .pl-v,
.markdown-body .pl-smw {
  color: #953800;
}

.markdown-body .pl-bu {
  color: #82071e;
}

.markdown-body .pl-ii {
  color: #f6f8fa;
  background-color: #82071e;
}

.markdown-body .pl-c2 {
  color: #f6f8fa;
  background-color: #cf222e;
}

.markdown-body .pl-sr .pl-cce {
  font-weight: bold;
  color: #116329;
}

.markdown-body .pl-ml {
  color: #3b2300;
}

.markdown-body .pl-mh,
.markdown-body .pl-mh .pl-en,
.markdown-body .pl-ms {
  font-weight: bold;
  color: #0550ae;
}

.markdown-body .pl-mi {
  font-style: italic;
  color: #1f2328;
}

.markdown-body .pl-mb {
  font-weight: bold;
  color: #1f2328;
}

.markdown-body .pl-md {
  color: #82071e;
  background-color: #ffebe9;
}

.markdown-body .pl-mi1 {
  color: #116329;
  background-color: #dafbe1;
}

.markdown-body .pl-mc {
  color: #953800;
  background-color: #ffd8b5;
}

.markdown-body .pl-mi2 {
  color: #d1d9e0;
  background-color: #0550ae;
}

.markdown-body .pl-mdr {
  font-weight: bold;
  color: #8250df;
}

.markdown-body .pl-ba {
  color: #59636e;
}

.markdown-body .pl-sg {
  color: #818b98;
}

.markdown-body .pl-corl {
  text-decoration: underline;
  color: #0a3069;
}

.markdown-body [role=button]:focus:not(:focus-visible),
.markdown-body [role=tabpanel][tabindex="0"]:focus:not(:focus-visible),
.markdown-body button:focus:not(:focus-visible),
.markdown-body summary:focus:not(:focus-visible),
.markdown-body a:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}

.markdown-body [tabindex="0"]:focus:not(:focus-visible),
.markdown-body details-dialog:focus:not(:focus-visible) {
  outline: none;
}

.markdown-body g-emoji {
  display: inline-block;
  min-width: 1ch;
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  font-size: 1em;
  font-style: normal !important;
  font-weight: 400;
  line-height: 1;
  vertical-align: -0.075em;
}

.markdown-body g-emoji img {
  width: 1em;
  height: 1em;
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item label {
  font-weight: 400;
}

.markdown-body .task-list-item.enabled label {
  cursor: pointer;
}

.markdown-body .task-list-item + .task-list-item {
  margin-top: 0.25rem;
}

.markdown-body .task-list-item .handle {
  display: none;
}

.markdown-body .task-list-item-checkbox {
  margin: 0 .2em .25em -1.4em;
  vertical-align: middle;
}

.markdown-body ul:dir(rtl) .task-list-item-checkbox {
  margin: 0 -1.6em .25em .2em;
}

.markdown-body ol:dir(rtl) .task-list-item-checkbox {
  margin: 0 -1.6em .25em .2em;
}

.markdown-body .contains-task-list:hover .task-list-item-convert-container,
.markdown-body .contains-task-list:focus-within .task-list-item-convert-container {
  display: block;
  width: auto;
  height: 24px;
  overflow: visible;
  clip: auto;
}

.markdown-body ::-webkit-calendar-picker-indicator {
  filter: invert(50%);
}

.markdown-body .markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 1rem;
  color: inherit;
  border-left: .25em solid #d1d9e0;
}

.markdown-body .markdown-alert > :first-child {
  margin-top: 0;
}

.markdown-body .markdown-alert > :last-child {
  margin-bottom: 0;
}

.markdown-body .markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1;
}

.markdown-body .markdown-alert.markdown-alert-note {
  border-left-color: #0969da;
}

.markdown-body .markdown-alert.markdown-alert-note .markdown-alert-title {
  color: #0969da;
}

.markdown-body .markdown-alert.markdown-alert-important {
  border-left-color: #8250df;
}

.markdown-body .markdown-alert.markdown-alert-important .markdown-alert-title {
  color: #8250df;
}

.markdown-body .markdown-alert.markdown-alert-warning {
  border-left-color: #9a6700;
}

.markdown-body .markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: #9a6700;
}

.markdown-body .markdown-alert.markdown-alert-tip {
  border-left-color: #1a7f37;
}

.markdown-body .markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: #1a7f37;
}

.markdown-body .markdown-alert.markdown-alert-caution {
  border-left-color: #cf222e;
}

.markdown-body .markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: #d1242f;
}

.markdown-body > *:first-child > .heading-element:first-child {
  margin-top: 0 !important;
}

.markdown-body .highlight pre:has(+.zeroclipboard-container) {
  min-height: 52px;
}

    </style>

</head>
<body>

    <svg style="display: none" aria-hidden="true" focusable="false">
        <symbol id="dir" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z"/>
        </symbol>
        <symbol id="file" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"/>
        </symbol>
        <symbol id="file-added" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V4.664a.25.25 0 0 0-.073-.177l-2.914-2.914a.25.25 0 0 0-.177-.073Zm4.48 3.758a.75.75 0 0 1 .755.745l.01 1.497h1.497a.75.75 0 0 1 0 1.5H9v1.507a.75.75 0 0 1-1.5 0V9.005l-1.502.01a.75.75 0 0 1-.01-1.5l1.507-.01-.01-1.492a.75.75 0 0 1 .745-.755Z"/>
        </symbol>
        <symbol id="file-modified" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M1 1.75C1 .784 1.784 0 2.75 0h7.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16H2.75A1.75 1.75 0 0 1 1 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V4.664a.25.25 0 0 0-.073-.177l-2.914-2.914a.25.25 0 0 0-.177-.073ZM8 3.25a.75.75 0 0 1 .75.75v1.5h1.5a.75.75 0 0 1 0 1.5h-1.5v1.5a.75.75 0 0 1-1.5 0V7h-1.5a.75.75 0 0 1 0-1.5h1.5V4A.75.75 0 0 1 8 3.25Zm-3 8a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Z"/>
        </symbol>
        <symbol id="file-deleted" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V4.664a.25.25 0 0 0-.073-.177l-2.914-2.914a.25.25 0 0 0-.177-.073Zm4.5 6h2.242a.75.75 0 0 1 0 1.5h-2.24l-2.254.015a.75.75 0 0 1-.01-1.5Z"/>
        </symbol>
        <symbol id="file-renamed" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-3.5a.75.75 0 0 1 0-1.5h3.5a.25.25 0 0 0 .25-.25V4.664a.25.25 0 0 0-.073-.177l-2.914-2.914a.25.25 0 0 0-.177-.073H3.75a.25.25 0 0 0-.25.25v6.5a.75.75 0 0 1-1.5 0v-6.5Z"/>
            <path fill="currentColor"
                  d="m5.427 15.573 3.146-3.146a.25.25 0 0 0 0-.354L5.427 8.927A.25.25 0 0 0 5 9.104V11.5H.75a.75.75 0 0 0 0 1.5H5v2.396c0 .223.27.335.427.177Z"/>
        </symbol>
        <symbol id="arrow-top" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M3.47 7.78a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0l4.25 4.25a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018L9 4.81v7.44a.75.75 0 0 1-1.5 0V4.81L4.53 7.78a.75.75 0 0 1-1.06 0Z"></path>
        </symbol>
        <symbol id="commit" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M11.93 8.5a4.002 4.002 0 0 1-7.86 0H.75a.75.75 0 0 1 0-1.5h3.32a4.002 4.002 0 0 1 7.86 0h3.32a.75.75 0 0 1 0 1.5Zm-1.43-.75a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path>
        </symbol>
        <symbol id="branch" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z"></path>
        </symbol>
        <symbol id="tag" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"></path>
        </symbol>
        <symbol id="code" viewBox="0 0 16 16">
            <path fill="currentColor"
                  d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"></path>
        </symbol>
    </svg>

<div class="menu">
    <div class="menu-content">
        <a href="../../../index.html" class="project-name">personal-web-2025</a>
        <div class="menu-item selected">
            <a href="../../../blob/main/index.html">
                <svg aria-hidden="true" width="16" height="16">
                    <use xlink:href="#code"></use>
                </svg>
                Code
            </a>
        </div>
        <div class="menu-item ">
            <a href="../../../branches.html">
                <svg aria-hidden="true" focusable="false" width="16" height="16">
                    <use xlink:href="#branch"></use>
                </svg>
                Branches
            </a>
        </div>
        <div class="menu-item ">
            <a href="../../../tags.html">
                <svg aria-hidden="true" focusable="false" width="16" height="16">
                    <use xlink:href="#tag"></use>
                </svg>
                Tags
            </a>
        </div>
        <div class="menu-item ">
            <a href="../../../commits/main/index.html">
                <svg aria-hidden="true" focusable="false" width="16" height="16">
                    <use xlink:href="#commit"></use>
                </svg>
                Commits
            </a>
        </div>
    </div>
</div>
<main>
    <div class="main-content">
        
    
    <div class="header-container">
        <header>
            
                <div class="header-ref" aria-label="Ref">main</div>
            
            
                <nav class="breadcrumbs" aria-label="Breadcrumbs">
                    
                        
                        
                            <a href="./../index.html">personal-web-2025</a>
                        
                    
                        
                            <div>/</div>
                        
                        
                            <a href="./index.html">docs</a>
                        
                    
                        
                            <div>/</div>
                        
                        
                            <h1>cloud-run-auto-deploy.md</h1>
                            
                        
                    
                </nav>
            
            <button class="goto-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                <svg aria-hidden="true" focusable="false" width="16" height="16">
                    <use xlink:href="#arrow-top"></use>
                </svg>
                Top
            </button>
        </header>
    </div>

    <article class="markdown-container">
        <div class="markdown-body">
            <html><head></head><body><h1 id="cloud-run---">Cloud Run ìë™ ë°°í¬ ê°€ì´ë“œ</h1>
<h2 id="heading">ê°œìš”</h2>
<p>ì´ ë¬¸ì„œëŠ” GitHubì— ì½”ë“œë¥¼ í‘¸ì‹œí•˜ë©´ ìë™ìœ¼ë¡œ Cloud Runì— ë°°í¬ë˜ëŠ” CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
<h2 id="heading-1">ëª©ì°¨</h2>
<ol>
<li><a href="#%EB%B0%B0%ED%8F%AC-%EB%B0%A9%EB%B2%95-%EB%B9%84%EA%B5%90">ë°°í¬ ë°©ë²• ë¹„êµ</a></li>
<li><a href="#cloud-build-%EC%9E%90%EB%8F%99-%EB%B0%B0%ED%8F%AC-%EA%B6%8C%EC%9E%A5">Cloud Build ìë™ ë°°í¬ (ê¶Œì¥)</a></li>
<li><a href="#github-actions-%EC%9E%90%EB%8F%99-%EB%B0%B0%ED%8F%AC">GitHub Actions ìë™ ë°°í¬</a></li>
<li><a href="#%EB%A1%9C%EC%BB%AC-%EC%88%98%EB%8F%99-%EB%B0%B0%ED%8F%AC">ë¡œì»¬ ìˆ˜ë™ ë°°í¬</a></li>
<li><a href="#%EB%B9%84%EC%9A%A9-%EB%B6%84%EC%84%9D">ë¹„ìš© ë¶„ì„</a></li>
<li><a href="#%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85">íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</a></li>
</ol>
<hr/>
<h2 id="--">ë°°í¬ ë°©ë²• ë¹„êµ</h2>
<h3 id="-1-cloud-build-">ë°©ë²• 1: Cloud Build (ê¶Œì¥)</h3>
<pre><code>âœ… ë¬´ë£Œ: 120ë¶„/ì¼ (ê°œì¸ í”„ë¡œì íŠ¸ ì¶©ë¶„)
âœ… GCP ë„¤ì´í‹°ë¸Œ í†µí•© (ê¶Œí•œ ê´€ë¦¬ ì‰¬ì›€)
âœ… ì„¤ì • ê°„ë‹¨ (cloudbuild.yaml)
âœ… ë¹Œë“œ ì†ë„ ë¹ ë¦„
âœ… GitHub ì—°ë™ ê°€ëŠ¥

ë¹„ìš©: $0 (ë¬´ë£Œ tier ë²”ìœ„ ë‚´)
ì„¤ì • ì‹œê°„: 10-15ë¶„
</code></pre>
<h3 id="-2-github-actions">ë°©ë²• 2: GitHub Actions</h3>
<pre><code>âœ… ë¬´ë£Œ: 2,000ë¶„/ì›” (Private repo)
âœ… ë¬´ì œí•œ (Public repo)
âœ… GitHubì—ì„œ ëª¨ë“  ê²ƒ ê´€ë¦¬
âœ… ë‹¤ë¥¸ CI/CD ë„êµ¬ì™€ í†µí•© ì‰¬ì›€

âš ï¸ GCP ì¸ì¦ ì„¤ì • í•„ìš” (Service Account)

ë¹„ìš©: $0
ì„¤ì • ì‹œê°„: 15-20ë¶„
</code></pre>
<h3 id="-3---">ë°©ë²• 3: ë¡œì»¬ ìˆ˜ë™ ë°°í¬</h3>
<pre><code>âœ… ë¬´ë£Œ: 100%
âœ… ì„¤ì • ê°„ë‹¨
âœ… ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥

âš ï¸ ìë™í™” ì—†ìŒ (ìˆ˜ë™ ì‹¤í–‰ í•„ìš”)

ë¹„ìš©: $0
ì„¤ì • ì‹œê°„: 5ë¶„
</code></pre>
<hr/>
<h2 id="cloud-build---">Cloud Build ìë™ ë°°í¬ (ê¶Œì¥)</h2>
<h3 id="heading-2">ì›Œí¬í”Œë¡œìš°</h3>
<pre><code>1. ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì •
   â†“
2. git add . &amp;&amp; git commit -m &#34;Update&#34;
   â†“
3. git push origin main
   â†“
4. Cloud Build ìë™ ì‹¤í–‰
   - Docker ì´ë¯¸ì§€ ë¹Œë“œ
   - Google Container Registryë¡œ í‘¸ì‹œ
   - Cloud Runì— ë°°í¬
   â†“
5. ë°°í¬ ì™„ë£Œ! ğŸ‰
</code></pre>
<h3 id="1--">1. ì‚¬ì „ ì¤€ë¹„</h3>
<h4 id="-">í•„ìš”í•œ ê²ƒ</h4>
<ul>
<li>âœ… Google Cloud Platform í”„ë¡œì íŠ¸</li>
<li>âœ… Cloud Run ì„œë¹„ìŠ¤ (ì´ë¯¸ ë°°í¬ëœ ìƒíƒœ)</li>
<li>âœ… GitHub ì €ì¥ì†Œ</li>
<li>âœ… ë¡œì»¬ì— Docker ì„¤ì¹˜</li>
</ul>
<h3 id="2-cloud-build-api-">2. Cloud Build API í™œì„±í™”</h3>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># Cloud Build API í™œì„±í™”</span>
</span></span><span style="display:flex;"><span>gcloud services <span style="color:#6639ba">enable</span> cloudbuild.googleapis.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Artifact Registry API í™œì„±í™” (í•„ìš”ì‹œ)</span>
</span></span><span style="display:flex;"><span>gcloud services <span style="color:#6639ba">enable</span> artifactregistry.googleapis.com
</span></span></code></pre><h3 id="3-cloud-build--">3. Cloud Build ê¶Œí•œ ì„¤ì •</h3>
<p>Cloud Build ì„œë¹„ìŠ¤ ê³„ì •ì— Cloud Run ë°°í¬ ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># í”„ë¡œì íŠ¸ ë²ˆí˜¸ í™•ì¸</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">PROJECT_ID</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;your-project-id&#34;</span>  <span style="color:#57606a"># ì‹¤ì œ í”„ë¡œì íŠ¸ IDë¡œ ë³€ê²½</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0550ae">=</span><span style="color:#cf222e">$(</span>gcloud projects describe <span style="color:#953800">$PROJECT_ID</span> --format<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;value(projectNumber)&#34;</span><span style="color:#cf222e">)</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;Project Number: </span><span style="color:#953800">$PROJECT_NUMBER</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Cloud Run Admin ê¶Œí•œ ë¶€ì—¬</span>
</span></span><span style="display:flex;"><span>gcloud projects add-iam-policy-binding <span style="color:#953800">$PROJECT_ID</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:</span><span style="color:#0a3069">${</span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0a3069">}</span><span style="color:#0a3069">@cloudbuild.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/run.admin&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Service Account User ê¶Œí•œ ë¶€ì—¬</span>
</span></span><span style="display:flex;"><span>gcloud projects add-iam-policy-binding <span style="color:#953800">$PROJECT_ID</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:</span><span style="color:#0a3069">${</span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0a3069">}</span><span style="color:#0a3069">@cloudbuild.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/iam.serviceAccountUser&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Storage Admin ê¶Œí•œ ë¶€ì—¬ (GCR ì ‘ê·¼ìš©)</span>
</span></span><span style="display:flex;"><span>gcloud projects add-iam-policy-binding <span style="color:#953800">$PROJECT_ID</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:</span><span style="color:#0a3069">${</span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0a3069">}</span><span style="color:#0a3069">@cloudbuild.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/storage.admin&#34;</span>
</span></span></code></pre><h3 id="4-cloudbuildyaml--">4. cloudbuild.yaml íŒŒì¼ í™•ì¸</h3>
<p>í”„ë¡œì íŠ¸ì— ì´ë¯¸ <code>server/cloudbuild.yaml</code> íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#0550ae">steps</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#57606a"># Step 1: Docker ì´ë¯¸ì§€ ë¹Œë“œ</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;gcr.io/cloud-builders/docker&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">args</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;build&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;-t&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:$SHORT_SHA&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;-t&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:latest&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;.&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#57606a"># Step 2: Google Container Registryë¡œ í‘¸ì‹œ</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;gcr.io/cloud-builders/docker&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">args</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;push&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:$SHORT_SHA&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;gcr.io/cloud-builders/docker&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">args</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;push&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:latest&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#57606a"># Step 3: Cloud Runì— ìë™ ë°°í¬</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;gcr.io/cloud-builders/gcloud&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">args</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;run&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;deploy&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;backend&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--image&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:$SHORT_SHA&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--region&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;us-west1&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--platform&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;managed&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--allow-unauthenticated&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">images</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:$SHORT_SHA&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:latest&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">options</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">logging</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>CLOUD_LOGGING_ONLY<span style="color:#fff">
</span></span></span></code></pre><p><strong>ë³€ìˆ˜ ì„¤ëª…:</strong></p>
<ul>
<li><code>$PROJECT_ID</code>: GCP í”„ë¡œì íŠ¸ ID (ìë™ ì¹˜í™˜)</li>
<li><code>$SHORT_SHA</code>: Git ì»¤ë°‹ í•´ì‹œ ì• 7ìë¦¬ (ìë™ ì¹˜í™˜)</li>
<li><code>backend</code>: Cloud Run ì„œë¹„ìŠ¤ ì´ë¦„</li>
<li><code>us-west1</code>: Cloud Run ë¦¬ì „</li>
</ul>
<p><strong>í•„ìš” ì‹œ ìˆ˜ì •:</strong></p>
<ul>
<li>ì„œë¹„ìŠ¤ ì´ë¦„: <code>backend</code> â†’ ë‹¤ë¥¸ ì´ë¦„</li>
<li>ë¦¬ì „: <code>us-west1</code> â†’ <code>asia-northeast3</code> (ì„œìš¸) ë“±</li>
<li>í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€:
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>- <span style="color:#0a3069">&#39;--set-env-vars&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>- <span style="color:#0a3069">&#39;NODE_ENV=production,OTHER_VAR=value&#39;</span><span style="color:#fff">
</span></span></span></code></pre></li>
</ul>
<h3 id="5-github--">5. GitHub ì €ì¥ì†Œ ì—°ê²°</h3>
<h4 id="-a-cloud-console----">ë°©ë²• A: Cloud Consoleì—ì„œ ì—°ê²° (ì¶”ì²œ, ë” ì‰¬ì›€)</h4>
<ol>
<li>
<p><strong>Google Cloud Console ì ‘ì†</strong></p>
<pre><code>https://console.cloud.google.com/cloud-build/triggers
</code></pre>
</li>
<li>
<p><strong>í”„ë¡œì íŠ¸ ì„ íƒ</strong></p>
</li>
<li>
<p><strong>â€œCREATE TRIGGERâ€ ë²„íŠ¼ í´ë¦­</strong></p>
</li>
<li>
<p><strong>Trigger ì„¤ì •:</strong></p>
<pre><code>Name: deploy-backend
Description: Deploy backend to Cloud Run on push to main
Event: Push to a branch
Source:
  - Click &#34;CONNECT REPOSITORY&#34;
  - Select &#34;GitHub (Cloud Build GitHub App)&#34;
  - Authenticate GitHub
  - Select your repository: personal-web-2025
Branch: ^main$
Build Configuration: Cloud Build configuration file (yaml or json)
Cloud Build configuration file location: server/cloudbuild.yaml
</code></pre>
</li>
<li>
<p><strong>â€œCREATEâ€ ë²„íŠ¼ í´ë¦­</strong></p>
</li>
</ol>
<h4 id="-b-gcloud--">ë°©ë²• B: gcloud ëª…ë ¹ì–´ë¡œ ì—°ê²°</h4>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># GitHub ì €ì¥ì†Œ ì—°ê²° ë° Trigger ìƒì„±</span>
</span></span><span style="display:flex;"><span>gcloud builds triggers create github <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --repo-name<span style="color:#0550ae">=</span>personal-web-2025 <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --repo-owner<span style="color:#0550ae">=</span>YOUR_GITHUB_USERNAME <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --branch-pattern<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;^main</span>$<span style="color:#0a3069">&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --build-config<span style="color:#0550ae">=</span>server/cloudbuild.yaml <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --description<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;Deploy backend to Cloud Run&#34;</span>
</span></span></code></pre><p><strong>ì°¸ê³ :</strong> ì²˜ìŒ ì‹¤í–‰ ì‹œ GitHub ì¸ì¦ í•„ìš”</p>
<h3 id="6-">6. í…ŒìŠ¤íŠ¸</h3>
<h4 id="---">ì½”ë“œ ìˆ˜ì • ë° í‘¸ì‹œ</h4>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># 1. ì½”ë“œ ìˆ˜ì • (ì˜ˆ: server/index.js)</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;console.log(&#39;test deploy&#39;);&#34;</span> &gt;&gt; server/index.js
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 2. Git ì»¤ë°‹ ë° í‘¸ì‹œ</span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#0a3069">&#34;Test auto deploy&#34;</span>
</span></span><span style="display:flex;"><span>git push origin main
</span></span></code></pre><h4 id="---1">ë¹Œë“œ ìƒíƒœ í™•ì¸</h4>
<p><strong>Cloud Consoleì—ì„œ í™•ì¸:</strong></p>
<pre><code>https://console.cloud.google.com/cloud-build/builds
</code></pre>
<p><strong>í„°ë¯¸ë„ì—ì„œ í™•ì¸:</strong></p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># ìµœê·¼ ë¹Œë“œ ëª©ë¡ í™•ì¸</span>
</span></span><span style="display:flex;"><span>gcloud builds list --limit<span style="color:#0550ae">=</span><span style="color:#0550ae">5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># íŠ¹ì • ë¹Œë“œ ë¡œê·¸ í™•ì¸</span>
</span></span><span style="display:flex;"><span>gcloud builds log BUILD_ID --stream
</span></span></code></pre><h4 id="--1">ë°°í¬ í™•ì¸</h4>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># Cloud Run ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>gcloud run services describe backend --region<span style="color:#0550ae">=</span>us-west1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># ì„œë¹„ìŠ¤ URL í™•ì¸</span>
</span></span><span style="display:flex;"><span>gcloud run services describe backend <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region<span style="color:#0550ae">=</span>us-west1 <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --format<span style="color:#0550ae">=</span><span style="color:#0a3069">&#39;value(status.url)&#39;</span>
</span></span></code></pre><p>ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì† í…ŒìŠ¤íŠ¸:</p>
<pre><code>https://your-service-url/api/health
</code></pre>
<h3 id="7----">7. ë¹Œë“œ íˆìŠ¤í† ë¦¬ ë° ë¡œê·¸</h3>
<h4 id="cloud-console-">Cloud Consoleì—ì„œ í™•ì¸</h4>
<pre><code>https://console.cloud.google.com/cloud-build/builds
</code></pre>
<ul>
<li>âœ… ì„±ê³µí•œ ë¹Œë“œ: ë…¹ìƒ‰ ì²´í¬</li>
<li>âŒ ì‹¤íŒ¨í•œ ë¹Œë“œ: ë¹¨ê°„ìƒ‰ X</li>
<li>ê° ë¹Œë“œ í´ë¦­í•˜ë©´ ìƒì„¸ ë¡œê·¸ í™•ì¸ ê°€ëŠ¥</li>
</ul>
<h4 id="--2">í„°ë¯¸ë„ì—ì„œ í™•ì¸</h4>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># ìµœê·¼ ë¹Œë“œ ëª©ë¡</span>
</span></span><span style="display:flex;"><span>gcloud builds list --limit<span style="color:#0550ae">=</span><span style="color:#0550ae">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># íŠ¹ì • ë¹Œë“œ ìƒì„¸ ì •ë³´</span>
</span></span><span style="display:flex;"><span>gcloud builds describe BUILD_ID
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># ë¹Œë“œ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°</span>
</span></span><span style="display:flex;"><span>gcloud builds log BUILD_ID --stream
</span></span></code></pre><h3 id="8----">8. í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ (ì„ íƒ)</h3>
<p><code>cloudbuild.yaml</code>ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#0550ae">steps</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#57606a"># ... ê¸°ì¡´ steps ...</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;gcr.io/cloud-builders/gcloud&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">args</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;run&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;deploy&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;backend&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--image&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:$SHORT_SHA&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--region&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;us-west1&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--platform&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;managed&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--allow-unauthenticated&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;--set-env-vars&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;NODE_ENV=production,MONGO_URI=$$MONGO_URI,JWT_SECRET=$$JWT_SECRET&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">secretEnv</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;MONGO_URI&#39;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;JWT_SECRET&#39;</span><span style="color:#1f2328">]</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a"># Secret Managerì—ì„œ ë¹„ë°€ ê°€ì ¸ì˜¤ê¸°</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">availableSecrets</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">secretManager</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>- <span style="color:#0550ae">versionName</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>projects/$PROJECT_ID/secrets/MONGO_URI/versions/latest<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span><span style="color:#0550ae">env</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;MONGO_URI&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>- <span style="color:#0550ae">versionName</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>projects/$PROJECT_ID/secrets/JWT_SECRET/versions/latest<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span><span style="color:#0550ae">env</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;JWT_SECRET&#39;</span><span style="color:#fff">
</span></span></span></code></pre><p><strong>Secret Managerì— ë¹„ë°€ ì €ì¥:</strong></p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># Secret ìƒì„±</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> -n <span style="color:#0a3069">&#34;mongodb://...&#34;</span> <span style="color:#1f2328">|</span> gcloud secrets create MONGO_URI --data-file<span style="color:#0550ae">=</span>-
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> -n <span style="color:#0a3069">&#34;your-jwt-secret&#34;</span> <span style="color:#1f2328">|</span> gcloud secrets create JWT_SECRET --data-file<span style="color:#0550ae">=</span>-
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Cloud Buildì— Secret ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬</span>
</span></span><span style="display:flex;"><span>gcloud secrets add-iam-policy-binding MONGO_URI <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:</span><span style="color:#0a3069">${</span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0a3069">}</span><span style="color:#0a3069">@cloudbuild.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/secretmanager.secretAccessor&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gcloud secrets add-iam-policy-binding JWT_SECRET <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:</span><span style="color:#0a3069">${</span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0a3069">}</span><span style="color:#0a3069">@cloudbuild.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/secretmanager.secretAccessor&#34;</span>
</span></span></code></pre><h3 id="9------">9. íŠ¹ì • í´ë” ë³€ê²½ ì‹œì—ë§Œ ë¹Œë“œ (ì„ íƒ)</h3>
<p><code>server/</code> í´ë” ë³€ê²½ ì‹œì—ë§Œ ë¹Œë“œí•˜ë„ë¡ Trigger ì„¤ì •:</p>
<p><strong>Cloud Consoleì—ì„œ:</strong></p>
<ol>
<li>Cloud Build â†’ Triggers â†’ í•´ë‹¹ Trigger ì„ íƒ â†’ EDIT</li>
<li>â€œIncluded files filter (glob)â€ ì¶”ê°€:
<pre><code>server/**
</code></pre>
</li>
</ol>
<p><strong>gcloud ëª…ë ¹ì–´:</strong></p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>gcloud builds triggers update TRIGGER_NAME <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --included-files<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;server/**&#34;</span>
</span></span></code></pre><hr/>
<h2 id="github-actions--">GitHub Actions ìë™ ë°°í¬</h2>
<h3 id="heading-3">ì›Œí¬í”Œë¡œìš°</h3>
<pre><code>1. ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì •
   â†“
2. git push origin main
   â†“
3. GitHub Actions ì‹¤í–‰
   - Docker ì´ë¯¸ì§€ ë¹Œë“œ
   - GCR í‘¸ì‹œ
   - Cloud Run ë°°í¬
   â†“
4. ì™„ë£Œ!
</code></pre>
<h3 id="1-gcp-service-account-">1. GCP Service Account ìƒì„±</h3>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># Service Account ìƒì„±</span>
</span></span><span style="display:flex;"><span>gcloud iam service-accounts create github-actions <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --display-name<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;GitHub Actions&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Cloud Run Admin ê¶Œí•œ</span>
</span></span><span style="display:flex;"><span>gcloud projects add-iam-policy-binding YOUR_PROJECT_ID <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:github-actions@YOUR_PROJECT_ID.iam.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/run.admin&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Storage Admin ê¶Œí•œ (GCR ì ‘ê·¼)</span>
</span></span><span style="display:flex;"><span>gcloud projects add-iam-policy-binding YOUR_PROJECT_ID <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:github-actions@YOUR_PROJECT_ID.iam.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/storage.admin&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Service Account User ê¶Œí•œ</span>
</span></span><span style="display:flex;"><span>gcloud projects add-iam-policy-binding YOUR_PROJECT_ID <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:github-actions@YOUR_PROJECT_ID.iam.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/iam.serviceAccountUser&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># JSON í‚¤ ìƒì„±</span>
</span></span><span style="display:flex;"><span>gcloud iam service-accounts keys create key.json <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --iam-account<span style="color:#0550ae">=</span>github-actions@YOUR_PROJECT_ID.iam.gserviceaccount.com
</span></span></code></pre><h3 id="2-github-secret-">2. GitHub Secret ì¶”ê°€</h3>
<ol>
<li><strong>GitHub Repository â†’ Settings â†’ Secrets and variables â†’ Actions</strong></li>
<li><strong>â€œNew repository secretâ€ í´ë¦­</strong></li>
<li><strong>Secret ì¶”ê°€:</strong>
<pre><code>Name: GCP_SA_KEY
Value: key.json íŒŒì¼ ë‚´ìš© ì „ì²´ ë³µì‚¬/ë¶™ì—¬ë„£ê¸°
</code></pre>
</li>
<li><strong>â€œAdd secretâ€ í´ë¦­</strong></li>
</ol>
<h3 id="3-github-actions-workflow--">3. GitHub Actions Workflow íŒŒì¼ í™•ì¸</h3>
<p>í”„ë¡œì íŠ¸ì— ì´ë¯¸ <code>.github/workflows/deploy-backend.yml</code> íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Deploy Backend to Cloud Run<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">on</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">push</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">branches</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- main<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">paths</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;server/**&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;.github/workflows/deploy-backend.yml&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">env</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">PROJECT_ID</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>YOUR_GCP_PROJECT_ID <span style="color:#fff"> </span><span style="color:#57606a"># âš ï¸ ì‹¤ì œ í”„ë¡œì íŠ¸ IDë¡œ ë³€ê²½</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">SERVICE_NAME</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>backend<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">REGION</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>us-west1<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">jobs</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">deploy</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">runs-on</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>ubuntu-latest<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">steps</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Checkout code<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">uses</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>actions/checkout@v3<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Authenticate to Google Cloud<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">uses</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>google-github-actions/auth@v1<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">with</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">          </span><span style="color:#0550ae">credentials_json</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>${{ secrets.GCP_SA_KEY }}<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Set up Cloud SDK<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">uses</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>google-github-actions/setup-gcloud@v1<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Configure Docker to use gcloud<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">run</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>gcloud auth configure-docker<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Build Docker image<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">run</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#1f2328">|</span><span style="color:#0a3069">
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">          docker build -t gcr.io/${{ env.PROJECT_ID }}/${{ env.SERVICE_NAME }}:${{ github.sha }} ./server
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">          docker tag gcr.io/${{ env.PROJECT_ID }}/${{ env.SERVICE_NAME }}:${{ github.sha }} gcr.io/${{ env.PROJECT_ID }}/${{ env.SERVICE_NAME }}:latest</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Push to Google Container Registry<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">run</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#1f2328">|</span><span style="color:#0a3069">
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">          docker push gcr.io/${{ env.PROJECT_ID }}/${{ env.SERVICE_NAME }}:${{ github.sha }}
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">          docker push gcr.io/${{ env.PROJECT_ID }}/${{ env.SERVICE_NAME }}:latest</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Deploy to Cloud Run<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">run</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#1f2328">|</span><span style="color:#0a3069">
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">          gcloud run deploy ${{ env.SERVICE_NAME }} \
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">            --image gcr.io/${{ env.PROJECT_ID }}/${{ env.SERVICE_NAME }}:${{ github.sha }} \
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">            --region ${{ env.REGION }} \
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">            --platform managed \
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">            --allow-unauthenticated \
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">            --set-env-vars &#34;NODE_ENV=production&#34;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>Get Service URL<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0550ae">run</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#1f2328">|</span><span style="color:#0a3069">
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">          SERVICE_URL=$(gcloud run services describe ${{ env.SERVICE_NAME }} \
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">            --region ${{ env.REGION }} \
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">            --format &#39;value(status.url)&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069">          echo &#34;Service deployed at: $SERVICE_URL&#34;</span><span style="color:#fff">
</span></span></span></code></pre><p><strong>âš ï¸ ì¤‘ìš”: <code>PROJECT_ID</code>ë¥¼ ì‹¤ì œ í”„ë¡œì íŠ¸ IDë¡œ ë³€ê²½í•˜ì„¸ìš”!</strong></p>
<h3 id="4-">4. í…ŒìŠ¤íŠ¸</h3>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># ì½”ë“œ ìˆ˜ì • ë° í‘¸ì‹œ</span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#0a3069">&#34;Test GitHub Actions deploy&#34;</span>
</span></span><span style="display:flex;"><span>git push origin main
</span></span></code></pre><p><strong>ë¹Œë“œ í™•ì¸:</strong></p>
<ul>
<li>GitHub Repository â†’ Actions íƒ­</li>
<li>ì‹¤í–‰ ì¤‘ì¸ ì›Œí¬í”Œë¡œìš° í™•ì¸</li>
</ul>
<hr/>
<h2 id="---2">ë¡œì»¬ ìˆ˜ë™ ë°°í¬</h2>
<h3 id="1-deploysh--">1. deploy.sh ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©</h3>
<p>í”„ë¡œì íŠ¸ì— ì´ë¯¸ <code>server/deploy.sh</code> íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Cloud Run ë°°í¬ ìŠ¤í¬ë¦½íŠ¸</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">set</span> -e
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># ë³€ìˆ˜ ì„¤ì •</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">PROJECT_ID</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;YOUR_GCP_PROJECT_ID&#34;</span>  <span style="color:#57606a"># âš ï¸ ì‹¤ì œ í”„ë¡œì íŠ¸ IDë¡œ ë³€ê²½</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">SERVICE_NAME</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;backend&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">REGION</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;us-west1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">IMAGE_NAME</span><span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;gcr.io/</span><span style="color:#0a3069">${</span><span style="color:#953800">PROJECT_ID</span><span style="color:#0a3069">}</span><span style="color:#0a3069">/</span><span style="color:#0a3069">${</span><span style="color:#953800">SERVICE_NAME</span><span style="color:#0a3069">}</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;ğŸš€ Starting deployment to Cloud Run...&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 1. Docker ì´ë¯¸ì§€ ë¹Œë“œ</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;ğŸ“¦ Building Docker image...&#34;</span>
</span></span><span style="display:flex;"><span>docker build -t <span style="color:#0a3069">${</span><span style="color:#953800">IMAGE_NAME</span><span style="color:#0a3069">}</span>:latest .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 2. ì´ë¯¸ì§€ì— íƒ€ì„ìŠ¤íƒ¬í”„ íƒœê·¸ ì¶”ê°€</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">TIMESTAMP</span><span style="color:#0550ae">=</span><span style="color:#cf222e">$(</span>date +%Y%m%d-%H%M%S<span style="color:#cf222e">)</span>
</span></span><span style="display:flex;"><span>docker tag <span style="color:#0a3069">${</span><span style="color:#953800">IMAGE_NAME</span><span style="color:#0a3069">}</span>:latest <span style="color:#0a3069">${</span><span style="color:#953800">IMAGE_NAME</span><span style="color:#0a3069">}</span>:<span style="color:#0a3069">${</span><span style="color:#953800">TIMESTAMP</span><span style="color:#0a3069">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 3. Google Container Registryë¡œ í‘¸ì‹œ</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;ğŸ“¤ Pushing to Google Container Registry...&#34;</span>
</span></span><span style="display:flex;"><span>docker push <span style="color:#0a3069">${</span><span style="color:#953800">IMAGE_NAME</span><span style="color:#0a3069">}</span>:latest
</span></span><span style="display:flex;"><span>docker push <span style="color:#0a3069">${</span><span style="color:#953800">IMAGE_NAME</span><span style="color:#0a3069">}</span>:<span style="color:#0a3069">${</span><span style="color:#953800">TIMESTAMP</span><span style="color:#0a3069">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 4. Cloud Runì— ë°°í¬</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;â˜ï¸  Deploying to Cloud Run...&#34;</span>
</span></span><span style="display:flex;"><span>gcloud run deploy <span style="color:#0a3069">${</span><span style="color:#953800">SERVICE_NAME</span><span style="color:#0a3069">}</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --image <span style="color:#0a3069">${</span><span style="color:#953800">IMAGE_NAME</span><span style="color:#0a3069">}</span>:<span style="color:#0a3069">${</span><span style="color:#953800">TIMESTAMP</span><span style="color:#0a3069">}</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region <span style="color:#0a3069">${</span><span style="color:#953800">REGION</span><span style="color:#0a3069">}</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --platform managed <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --allow-unauthenticated <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --set-env-vars <span style="color:#0a3069">&#34;NODE_ENV=production&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 5. ë°°í¬ ì™„ë£Œ URL ì¶œë ¥</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">SERVICE_URL</span><span style="color:#0550ae">=</span><span style="color:#cf222e">$(</span>gcloud run services describe <span style="color:#0a3069">${</span><span style="color:#953800">SERVICE_NAME</span><span style="color:#0a3069">}</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region <span style="color:#0a3069">${</span><span style="color:#953800">REGION</span><span style="color:#0a3069">}</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --format <span style="color:#0a3069">&#39;value(status.url)&#39;</span><span style="color:#cf222e">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;âœ… Deployment complete!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;ğŸŒ Service URL: </span><span style="color:#0a3069">${</span><span style="color:#953800">SERVICE_URL</span><span style="color:#0a3069">}</span><span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;ğŸ·ï¸  Image tag: </span><span style="color:#0a3069">${</span><span style="color:#953800">TIMESTAMP</span><span style="color:#0a3069">}</span><span style="color:#0a3069">&#34;</span>
</span></span></code></pre><h3 id="2----">2. ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì • ë° ì‹¤í–‰</h3>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># 1. PROJECT_ID ìˆ˜ì •</span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># server/deploy.sh íŒŒì¼ì„ ì—´ì–´ì„œ YOUR_GCP_PROJECT_IDë¥¼ ì‹¤ì œ ê°’ìœ¼ë¡œ ë³€ê²½</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 2. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬</span>
</span></span><span style="display:flex;"><span>chmod +x server/deploy.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 3. ë°°í¬ ì‹¤í–‰</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">cd</span> server
</span></span><span style="display:flex;"><span>./deploy.sh
</span></span></code></pre><h3 id="3---">3. ê°„ë‹¨í•œ ëª…ë ¹ì–´ë¡œ ë°°í¬</h3>
<p>ìŠ¤í¬ë¦½íŠ¸ ì—†ì´ ì§ì ‘ ëª…ë ¹ì–´ ì‹¤í–‰:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#6639ba">cd</span> server
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 1. Docker ì´ë¯¸ì§€ ë¹Œë“œ</span>
</span></span><span style="display:flex;"><span>docker build -t gcr.io/YOUR_PROJECT_ID/backend:latest .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 2. GCRë¡œ í‘¸ì‹œ</span>
</span></span><span style="display:flex;"><span>docker push gcr.io/YOUR_PROJECT_ID/backend:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># 3. Cloud Run ë°°í¬</span>
</span></span><span style="display:flex;"><span>gcloud run deploy backend <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --image gcr.io/YOUR_PROJECT_ID/backend:latest <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region us-west1 <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --platform managed <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --allow-unauthenticated
</span></span></code></pre><hr/>
<h2 id="--3">ë¹„ìš© ë¶„ì„</h2>
<h3 id="cloud-build-">Cloud Build (ê¶Œì¥)</h3>
<h4 id="-tier">ë¬´ë£Œ tier</h4>
<pre><code>âœ… ë¹Œë“œ ì‹œê°„: 120ë¶„/ì¼ (ë¬´ë£Œ)
âœ… ì•½ 24-40íšŒ ë°°í¬/ì¼ ê°€ëŠ¥ (1íšŒ ë¹Œë“œ 3-5ë¶„ ê¸°ì¤€)
</code></pre>
<h4 id="----1">ì‹¤ì œ ì‚¬ìš©ëŸ‰ (ê°œì¸ í”„ë¡œì íŠ¸)</h4>
<pre><code>ğŸ“Š ì˜ˆìƒ ë°°í¬ íšŸìˆ˜:
- ê°œë°œ ì¤‘: 1-3íšŒ/ì¼
- ì•ˆì •ê¸°: 1-2íšŒ/ì£¼

ğŸ“Š ì˜ˆìƒ ë¹Œë“œ ì‹œê°„:
- 3íšŒ/ì¼ Ã— 5ë¶„ = 15ë¶„/ì¼
- ë¬´ë£Œ í•œë„: 120ë¶„/ì¼
- ì‚¬ìš©ë¥ : 12.5% âœ…

ê²°ë¡ : 100% ë¬´ë£Œ ë²”ìœ„ ë‚´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥!
</code></pre>
<h4 id="---3">ì´ˆê³¼ ì‹œ ë¹„ìš©</h4>
<pre><code>ğŸ’° $0.003/ë¶„ (ë¹Œë“œ ì‹œê°„ ì´ˆê³¼ë¶„)

ì˜ˆ: í•˜ë£¨ 200ë¶„ ì‚¬ìš© ì‹œ
- ë¬´ë£Œ: 120ë¶„
- ìœ ë£Œ: 80ë¶„ Ã— $0.003 = $0.24/ì¼ = $7.20/ì›”
</code></pre>
<h3 id="github-actions">GitHub Actions</h3>
<h4 id="-tier-1">ë¬´ë£Œ tier</h4>
<pre><code>âœ… Public repo: ë¬´ì œí•œ ë¬´ë£Œ
âœ… Private repo: 2,000ë¶„/ì›” ë¬´ë£Œ
</code></pre>
<h4 id="---private-repo">ì´ˆê³¼ ì‹œ ë¹„ìš© (Private repo)</h4>
<pre><code>ğŸ’° $0.008/ë¶„

ì˜ˆ: ì›” 3,000ë¶„ ì‚¬ìš© ì‹œ
- ë¬´ë£Œ: 2,000ë¶„
- ìœ ë£Œ: 1,000ë¶„ Ã— $0.008 = $8/ì›”
</code></pre>
<h3 id="---4">ë¡œì»¬ ìˆ˜ë™ ë°°í¬</h3>
<pre><code>âœ… ë¹„ìš©: $0 (ì™„ì „ ë¬´ë£Œ)
âš ï¸ ìë™í™” ì—†ìŒ
</code></pre>
<h3 id="cloud-run--">Cloud Run ì‹¤í–‰ ë¹„ìš©</h3>
<pre><code>ë¬´ë£Œ tier (ë§¤ì›”):
- ìš”ì²­: 200ë§Œ ê±´
- CPU: 180,000 vCPU-ì´ˆ
- ë©”ëª¨ë¦¬: 360,000 GiB-ì´ˆ
- ë„¤íŠ¸ì›Œí¬ ì†¡ì‹ : 1GB

ê°œì¸ í”„ë¡œì íŠ¸ëŠ” ëŒ€ë¶€ë¶„ ë¬´ë£Œ ë²”ìœ„ ë‚´!
</code></pre>
<hr/>
<h2 id="heading-4">íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>
<h3 id="-1-cloud-build--">ë¬¸ì œ 1: Cloud Build ê¶Œí•œ ì˜¤ë¥˜</h3>
<p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong></p>
<pre><code>ERROR: (gcloud.run.deploy) PERMISSION_DENIED: Permission &#39;run.services.update&#39; denied
</code></pre>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># Cloud Build ì„œë¹„ìŠ¤ ê³„ì •ì— ê¶Œí•œ ë¶€ì—¬</span>
</span></span><span style="display:flex;"><span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0550ae">=</span><span style="color:#cf222e">$(</span>gcloud projects describe YOUR_PROJECT_ID --format<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;value(projectNumber)&#34;</span><span style="color:#cf222e">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gcloud projects add-iam-policy-binding YOUR_PROJECT_ID <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:</span><span style="color:#0a3069">${</span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0a3069">}</span><span style="color:#0a3069">@cloudbuild.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/run.admin&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gcloud projects add-iam-policy-binding YOUR_PROJECT_ID <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --member<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;serviceAccount:</span><span style="color:#0a3069">${</span><span style="color:#953800">PROJECT_NUMBER</span><span style="color:#0a3069">}</span><span style="color:#0a3069">@cloudbuild.gserviceaccount.com&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --role<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;roles/iam.serviceAccountUser&#34;</span>
</span></span></code></pre><hr/>
<h3 id="-2-github--">ë¬¸ì œ 2: GitHub ì—°ë™ ì‹¤íŒ¨</h3>
<p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong></p>
<pre><code>ERROR: Repository not found
</code></pre>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<ol>
<li>GitHub App ì¬ì¸ì¦:
<pre><code>https://console.cloud.google.com/cloud-build/triggers
</code></pre>
</li>
<li>â€œCONNECT REPOSITORYâ€ í´ë¦­</li>
<li>GitHub ì¬ì¸ì¦ ë° ì €ì¥ì†Œ ì„ íƒ</li>
</ol>
<hr/>
<h3 id="-3-docker--">ë¬¸ì œ 3: Docker ë¹Œë“œ ì‹¤íŒ¨</h3>
<p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong></p>
<pre><code>ERROR: failed to solve with frontend dockerfile.v0
</code></pre>
<p><strong>ì›ì¸:</strong></p>
<ul>
<li>Dockerfile ë¬¸ë²• ì˜¤ë¥˜</li>
<li>íŒŒì¼ ê²½ë¡œ ì˜¤ë¥˜</li>
<li>ì˜ì¡´ì„± ì„¤ì¹˜ ì‹¤íŒ¨</li>
</ul>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<ol>
<li>
<p>ë¡œì»¬ì—ì„œ Docker ë¹Œë“œ í…ŒìŠ¤íŠ¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#6639ba">cd</span> server
</span></span><span style="display:flex;"><span>docker build -t test:latest .
</span></span></code></pre></li>
<li>
<p>Dockerfile í™•ì¸:</p>
<ul>
<li><code>COPY</code> ëª…ë ¹ì–´ ê²½ë¡œ í™•ì¸</li>
<li><code>package.json</code> ì¡´ì¬ ì—¬ë¶€ í™•ì¸</li>
<li>Node.js ë²„ì „ í™•ì¸</li>
</ul>
</li>
<li>
<p><code>.dockerignore</code> í™•ì¸:</p>
<pre><code>node_modules
npm-debug.log
.env
.git
</code></pre>
</li>
</ol>
<hr/>
<h3 id="-4-cloud-run--">ë¬¸ì œ 4: Cloud Run ë°°í¬ íƒ€ì„ì•„ì›ƒ</h3>
<p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong></p>
<pre><code>ERROR: Revision failed to become ready
</code></pre>
<p><strong>ì›ì¸:</strong></p>
<ul>
<li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹¤íŒ¨</li>
<li>í¬íŠ¸ ë°”ì¸ë”© ì˜¤ë¥˜</li>
<li>í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½</li>
</ul>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<ol>
<li>
<p>Cloud Run ë¡œê·¸ í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>gcloud logging <span style="color:#6639ba">read</span> <span style="color:#0a3069">&#34;resource.type=cloud_run_revision&#34;</span> --limit<span style="color:#0550ae">=</span><span style="color:#0550ae">50</span>
</span></span></code></pre></li>
<li>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ì´ <code>PORT</code> í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#cf222e">const</span> <span style="color:#1f2328">PORT</span> <span style="color:#0550ae">=</span> <span style="color:#1f2328">process</span><span style="color:#1f2328">.</span><span style="color:#1f2328">env</span><span style="color:#1f2328">.</span><span style="color:#1f2328">PORT</span> <span style="color:#0550ae">||</span> <span style="color:#0550ae">3001</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">app</span><span style="color:#1f2328">.</span><span style="color:#1f2328">listen</span><span style="color:#1f2328">(</span><span style="color:#1f2328">PORT</span><span style="color:#1f2328">,</span> <span style="color:#1f2328">()</span> <span style="color:#1f2328">=&gt;</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">console</span><span style="color:#1f2328">.</span><span style="color:#1f2328">log</span><span style="color:#1f2328">(</span><span style="color:#0a3069">`Server running on port </span><span style="color:#0a3069">${</span><span style="color:#1f2328">PORT</span><span style="color:#0a3069">}</span><span style="color:#0a3069">`</span><span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">});</span>
</span></span></code></pre></li>
<li>
<p>í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#1f2328">app</span><span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#39;/health&#39;</span><span style="color:#1f2328">,</span> <span style="color:#1f2328">(</span><span style="color:#1f2328">req</span><span style="color:#1f2328">,</span> <span style="color:#1f2328">res</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">=&gt;</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">res</span><span style="color:#1f2328">.</span><span style="color:#1f2328">status</span><span style="color:#1f2328">(</span><span style="color:#0550ae">200</span><span style="color:#1f2328">).</span><span style="color:#1f2328">send</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#39;OK&#39;</span><span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">});</span>
</span></span></code></pre></li>
</ol>
<hr/>
<h3 id="-5-github-actions-gcp--">ë¬¸ì œ 5: GitHub Actionsì—ì„œ GCP ì¸ì¦ ì‹¤íŒ¨</h3>
<p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong></p>
<pre><code>Error: google-github-actions/auth failed with: retry function failed after 3 attempts
</code></pre>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<ol>
<li>
<p>Service Account í‚¤ ì¬í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>cat key.json
</span></span></code></pre></li>
<li>
<p>GitHub Secret ì¬ë“±ë¡:</p>
<ul>
<li>Repository â†’ Settings â†’ Secrets â†’ GCP_SA_KEY ì‚­ì œ</li>
<li><code>key.json</code> ì „ì²´ ë‚´ìš© ë³µì‚¬í•˜ì—¬ ì¬ë“±ë¡</li>
</ul>
</li>
<li>
<p>Service Account ê¶Œí•œ í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>gcloud projects get-iam-policy YOUR_PROJECT_ID <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --flatten<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;bindings[].members&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --filter<span style="color:#0550ae">=</span><span style="color:#0a3069">&#34;bindings.members:github-actions@*&#34;</span>
</span></span></code></pre></li>
</ol>
<hr/>
<h3 id="-6-----">ë¬¸ì œ 6: ë¹Œë“œëŠ” ì„±ê³µí•˜ì§€ë§Œ ë°°í¬ ì•ˆ ë¨</h3>
<p><strong>ì¦ìƒ:</strong></p>
<ul>
<li>Cloud Build ë¹Œë“œ ì„±ê³µ âœ…</li>
<li>í•˜ì§€ë§Œ Cloud Run ì„œë¹„ìŠ¤ê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ</li>
</ul>
<p><strong>ì›ì¸:</strong></p>
<ul>
<li>ì´ë¯¸ì§€ê°€ í‘¸ì‹œë˜ì—ˆì§€ë§Œ ë°°í¬ ë‹¨ê³„ ì‹¤íŒ¨</li>
<li>Cloud Run ì„œë¹„ìŠ¤ ì´ë¦„ ë¶ˆì¼ì¹˜</li>
</ul>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<ol>
<li>
<p>Cloud Build ë¡œê·¸ í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>gcloud builds list --limit<span style="color:#0550ae">=</span><span style="color:#0550ae">1</span>
</span></span><span style="display:flex;"><span>gcloud builds log BUILD_ID
</span></span></code></pre></li>
<li>
<p><code>cloudbuild.yaml</code>ì—ì„œ ì„œë¹„ìŠ¤ ì´ë¦„ í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;gcr.io/cloud-builders/gcloud&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">args</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>- <span style="color:#0a3069">&#39;run&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>- <span style="color:#0a3069">&#39;deploy&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>- <span style="color:#0a3069">&#39;backend&#39;</span><span style="color:#fff">  </span><span style="color:#57606a"># â† ì‹¤ì œ Cloud Run ì„œë¹„ìŠ¤ ì´ë¦„ê³¼ ì¼ì¹˜í•´ì•¼ í•¨</span><span style="color:#fff">
</span></span></span></code></pre></li>
<li>
<p>Cloud Run ì„œë¹„ìŠ¤ ëª©ë¡ í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>gcloud run services list
</span></span></code></pre></li>
</ol>
<hr/>
<h3 id="-7----">ë¬¸ì œ 7: í™˜ê²½ ë³€ìˆ˜ê°€ ì ìš©ë˜ì§€ ì•ŠìŒ</h3>
<p><strong>ì¦ìƒ:</strong></p>
<ul>
<li>ë°°í¬ëŠ” ì„±ê³µí•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ì§€ ëª»í•¨</li>
</ul>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<ol>
<li>
<p>Cloud Run ì„œë¹„ìŠ¤ì˜ í™˜ê²½ ë³€ìˆ˜ í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>gcloud run services describe backend --region<span style="color:#0550ae">=</span>us-west1 --format<span style="color:#0550ae">=</span>yaml
</span></span></code></pre></li>
<li>
<p><code>cloudbuild.yaml</code>ì— í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>- <span style="color:#0a3069">&#39;--set-env-vars&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>- <span style="color:#0a3069">&#39;NODE_ENV=production,MONGO_URI=your-mongo-uri&#39;</span><span style="color:#fff">
</span></span></span></code></pre></li>
<li>
<p>Secret Manager ì‚¬ìš© (ë¯¼ê°í•œ ì •ë³´):</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#0550ae">secretEnv</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;MONGO_URI&#39;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;JWT_SECRET&#39;</span><span style="color:#1f2328">]</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">availableSecrets</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">secretManager</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>- <span style="color:#0550ae">versionName</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>projects/$PROJECT_ID/secrets/MONGO_URI/versions/latest<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span><span style="color:#0550ae">env</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;MONGO_URI&#39;</span><span style="color:#fff">
</span></span></span></code></pre></li>
</ol>
<hr/>
<h3 id="-8----">ë¬¸ì œ 8: ì´ì „ ì´ë¯¸ì§€ê°€ ê³„ì† ë°°í¬ë¨</h3>
<p><strong>ì¦ìƒ:</strong></p>
<ul>
<li>ìƒˆ ì½”ë“œë¥¼ í‘¸ì‹œí–ˆëŠ”ë° ì´ì „ ë²„ì „ì´ ë°°í¬ë¨</li>
</ul>
<p><strong>ì›ì¸:</strong></p>
<ul>
<li>Docker ì´ë¯¸ì§€ ìºì‹œ</li>
<li>GCRì— ì´ë¯¸ì§€ê°€ í‘¸ì‹œë˜ì§€ ì•ŠìŒ</li>
<li><code>:latest</code> íƒœê·¸ë§Œ ì‚¬ìš©</li>
</ul>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<ol>
<li>
<p>ì»¤ë°‹ SHAë¥¼ ì´ë¯¸ì§€ íƒœê·¸ë¡œ ì‚¬ìš© (ì´ë¯¸ <code>cloudbuild.yaml</code>ì— ì ìš©ë¨):</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>- <span style="color:#0a3069">&#39;gcr.io/$PROJECT_ID/backend:$SHORT_SHA&#39;</span><span style="color:#fff">  </span><span style="color:#57606a"># âœ… ì»¤ë°‹ë³„ ê³ ìœ  íƒœê·¸</span><span style="color:#fff">
</span></span></span></code></pre></li>
<li>
<p>GCRì—ì„œ ì´ë¯¸ì§€ í™•ì¸:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>gcloud container images list-tags gcr.io/YOUR_PROJECT_ID/backend
</span></span></code></pre></li>
<li>
<p>íŠ¹ì • ì´ë¯¸ì§€ë¡œ ì¬ë°°í¬:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span>gcloud run deploy backend <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --image gcr.io/YOUR_PROJECT_ID/backend:abc1234 <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region us-west1
</span></span></code></pre></li>
</ol>
<hr/>
<h3 id="---5">ë¡œê·¸ í™•ì¸ ë°©ë²•</h3>
<h4 id="cloud-build--1">Cloud Build ë¡œê·¸</h4>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># ìµœê·¼ ë¹Œë“œ ëª©ë¡</span>
</span></span><span style="display:flex;"><span>gcloud builds list --limit<span style="color:#0550ae">=</span><span style="color:#0550ae">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># íŠ¹ì • ë¹Œë“œ ë¡œê·¸</span>
</span></span><span style="display:flex;"><span>gcloud builds log BUILD_ID --stream
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Cloud Console</span>
</span></span><span style="display:flex;"><span>https://console.cloud.google.com/cloud-build/builds
</span></span></code></pre><h4 id="cloud-run-">Cloud Run ë¡œê·¸</h4>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°</span>
</span></span><span style="display:flex;"><span>gcloud logging <span style="color:#6639ba">read</span> <span style="color:#0a3069">&#34;resource.type=cloud_run_revision AND resource.labels.service_name=backend&#34;</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --limit<span style="color:#0550ae">=</span><span style="color:#0550ae">50</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --format<span style="color:#0550ae">=</span>json <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --freshness<span style="color:#0550ae">=</span>1h
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Cloud Console</span>
</span></span><span style="display:flex;"><span>https://console.cloud.google.com/run
</span></span><span style="display:flex;"><span><span style="color:#57606a"># â†’ ì„œë¹„ìŠ¤ ì„ íƒ â†’ LOGS íƒ­</span>
</span></span></code></pre><h4 id="github-actions-">GitHub Actions ë¡œê·¸</h4>
<pre><code>GitHub Repository â†’ Actions íƒ­ â†’ ì›Œí¬í”Œë¡œìš° ì„ íƒ â†’ ê° Step í´ë¦­
</code></pre>
<hr/>
<h2 id="--4">ì¶”ê°€ ìµœì í™”</h2>
<h3 id="1---">1. ë¹Œë“œ ì†ë„ í–¥ìƒ</h3>
<h4 id="docker---">Docker ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ ì‚¬ìš©</h4>
<p><code>server/Dockerfile</code> ìµœì í™”:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># Stage 1: Dependencies</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">FROM</span><span style="color:#fff"> </span><span style="color:#0a3069">node:18-alpine</span><span style="color:#fff"> </span><span style="color:#cf222e">AS</span><span style="color:#fff"> </span><span style="color:#0a3069">deps</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">WORKDIR</span><span style="color:#fff"> </span><span style="color:#0a3069">/app</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">COPY</span> package*.json ./<span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">RUN</span> npm ci --only<span style="color:#0550ae">=</span>production<span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#57606a"># Stage 2: Build</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">FROM</span><span style="color:#fff"> </span><span style="color:#0a3069">node:18-alpine</span><span style="color:#fff"> </span><span style="color:#cf222e">AS</span><span style="color:#fff"> </span><span style="color:#0a3069">builder</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">WORKDIR</span><span style="color:#fff"> </span><span style="color:#0a3069">/app</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">COPY</span> package*.json ./<span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">RUN</span> npm ci<span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">COPY</span> . .<span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#57606a"># í•„ìš” ì‹œ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#57606a"># RUN npm run build</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#57606a"># Stage 3: Production</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">FROM</span><span style="color:#fff"> </span><span style="color:#0a3069">node:18-alpine</span><span style="color:#fff"> </span><span style="color:#cf222e">AS</span><span style="color:#fff"> </span><span style="color:#0a3069">runner</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">WORKDIR</span><span style="color:#fff"> </span><span style="color:#0a3069">/app</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">ENV</span> <span style="color:#953800">NODE_ENV</span><span style="color:#0550ae">=</span>production
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">COPY</span> --from<span style="color:#0550ae">=</span>deps /app/node_modules ./node_modules<span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">COPY</span> --from<span style="color:#0550ae">=</span>builder /app .<span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">EXPOSE</span><span style="color:#fff"> </span><span style="color:#0a3069">3001</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span><span style="display:flex;"><span><span style="color:#f6f8fa;background-color:#82071e"></span><span style="color:#cf222e">CMD</span> <span style="color:#1f2328">[</span><span style="color:#0a3069">&#34;node&#34;</span><span style="color:#1f2328">,</span> <span style="color:#0a3069">&#34;index.js&#34;</span><span style="color:#1f2328">]</span><span style="color:#f6f8fa;background-color:#82071e">
</span></span></span></code></pre><h4 id="docker-layer-">Docker Layer ìºì‹±</h4>
<p><code>cloudbuild.yaml</code>ì— ìºì‹œ ì¶”ê°€:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#0550ae">options</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">machineType</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;E2_HIGHCPU_8&#39;</span><span style="color:#fff">  </span><span style="color:#57606a"># ë¹Œë“œ ì†ë„ í–¥ìƒ</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">logging</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>CLOUD_LOGGING_ONLY<span style="color:#fff">
</span></span></span></code></pre><h3 id="2---">2. ë°°í¬ ì•Œë¦¼ ì„¤ì •</h3>
<h4 id="slack--">Slack ì•Œë¦¼ ì¶”ê°€</h4>
<p><code>cloudbuild.yaml</code>ì— ì¶”ê°€:</p>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#0550ae">steps</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#57606a"># ... ê¸°ì¡´ steps ...</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#57606a"># Slack ì•Œë¦¼</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span>- <span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;gcr.io/cloud-builders/curl&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">args</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;-X&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;POST&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;-H&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0550ae">&#39;Content-Type</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>application/json&#39;<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;-d&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;{&#34;text&#34;:&#34;âœ… Backend deployed successfully! Image: gcr.io/$PROJECT_ID/backend:$SHORT_SHA&#34;}&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">      </span>- <span style="color:#0a3069">&#39;YOUR_SLACK_WEBHOOK_URL&#39;</span><span style="color:#fff">
</span></span></span></code></pre><h3 id="3-rollback-">3. Rollback ì „ëµ</h3>
<h4 id="---6">ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±</h4>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># ì´ì „ ì´ë¯¸ì§€ í™•ì¸</span>
</span></span><span style="display:flex;"><span>gcloud container images list-tags gcr.io/YOUR_PROJECT_ID/backend
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># íŠ¹ì • ë²„ì „ìœ¼ë¡œ ë¡¤ë°±</span>
</span></span><span style="display:flex;"><span>gcloud run deploy backend <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --image gcr.io/YOUR_PROJECT_ID/backend:PREVIOUS_SHA <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region us-west1
</span></span></code></pre><h4 id="--blue-green-">íŠ¸ë˜í”½ ë¶„í•  (Blue-Green ë°°í¬)</h4>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># ìƒˆ ë²„ì „ ë°°í¬ (íŠ¸ë˜í”½ 0%)</span>
</span></span><span style="display:flex;"><span>gcloud run deploy backend <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --image gcr.io/YOUR_PROJECT_ID/backend:NEW_SHA <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region us-west1 <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --no-traffic <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --tag<span style="color:#0550ae">=</span>new
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># íŠ¸ë˜í”½ ì ì§„ì  ì´ë™</span>
</span></span><span style="display:flex;"><span>gcloud run services update-traffic backend <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region us-west1 <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --to-revisions<span style="color:#0550ae">=</span><span style="color:#953800">new</span><span style="color:#0550ae">=</span>10,LATEST<span style="color:#0550ae">=</span><span style="color:#0550ae">90</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># ì „ì²´ íŠ¸ë˜í”½ ì´ë™</span>
</span></span><span style="display:flex;"><span>gcloud run services update-traffic backend <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --region us-west1 <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>  --to-latest
</span></span></code></pre><hr/>
<h2 id="heading-5">ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
<h3 id="cloud-build----1">Cloud Build ì„¤ì • ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
<ul>
<li><input disabled="" type="checkbox"/> Cloud Build API í™œì„±í™”</li>
<li><input disabled="" type="checkbox"/> Cloud Build ì„œë¹„ìŠ¤ ê³„ì • ê¶Œí•œ ì„¤ì • (run.admin, iam.serviceAccountUser)</li>
<li><input disabled="" type="checkbox"/> <code>server/cloudbuild.yaml</code> íŒŒì¼ í™•ì¸</li>
<li><input disabled="" type="checkbox"/> GitHub ì €ì¥ì†Œ ì—°ê²°</li>
<li><input disabled="" type="checkbox"/> Trigger ìƒì„± (main ë¸Œëœì¹˜, server/cloudbuild.yaml)</li>
<li><input disabled="" type="checkbox"/> í…ŒìŠ¤íŠ¸ ë°°í¬ ì‹¤í–‰</li>
<li><input disabled="" type="checkbox"/> Cloud Consoleì—ì„œ ë¹Œë“œ ì„±ê³µ í™•ì¸</li>
<li><input disabled="" type="checkbox"/> Cloud Run ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸ í™•ì¸</li>
<li><input disabled="" type="checkbox"/> ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì† í…ŒìŠ¤íŠ¸</li>
</ul>
<h3 id="github-actions---">GitHub Actions ì„¤ì • ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
<ul>
<li><input disabled="" type="checkbox"/> GCP Service Account ìƒì„±</li>
<li><input disabled="" type="checkbox"/> Service Accountì— ê¶Œí•œ ë¶€ì—¬ (run.admin, storage.admin, iam.serviceAccountUser)</li>
<li><input disabled="" type="checkbox"/> Service Account JSON í‚¤ ìƒì„±</li>
<li><input disabled="" type="checkbox"/> GitHub Secretì— <code>GCP_SA_KEY</code> ì¶”ê°€</li>
<li><input disabled="" type="checkbox"/> <code>.github/workflows/deploy-backend.yml</code>ì—ì„œ <code>PROJECT_ID</code> ìˆ˜ì •</li>
<li><input disabled="" type="checkbox"/> í…ŒìŠ¤íŠ¸ í‘¸ì‹œ ì‹¤í–‰</li>
<li><input disabled="" type="checkbox"/> GitHub Actions íƒ­ì—ì„œ ì›Œí¬í”Œë¡œìš° ì„±ê³µ í™•ì¸</li>
<li><input disabled="" type="checkbox"/> Cloud Run ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸ í™•ì¸</li>
<li><input disabled="" type="checkbox"/> ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì† í…ŒìŠ¤íŠ¸</li>
</ul>
<h3 id="----2">ë¡œì»¬ ìˆ˜ë™ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
<ul>
<li><input disabled="" type="checkbox"/> <code>server/deploy.sh</code>ì—ì„œ <code>PROJECT_ID</code> ìˆ˜ì •</li>
<li><input disabled="" type="checkbox"/> ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬ (<code>chmod +x</code>)</li>
<li><input disabled="" type="checkbox"/> Docker Desktop ì‹¤í–‰ ì¤‘ í™•ì¸</li>
<li><input disabled="" type="checkbox"/> gcloud CLI ì¸ì¦ ì™„ë£Œ (<code>gcloud auth login</code>)</li>
<li><input disabled="" type="checkbox"/> ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (<code>./deploy.sh</code>)</li>
<li><input disabled="" type="checkbox"/> ë°°í¬ ì„±ê³µ ë©”ì‹œì§€ í™•ì¸</li>
<li><input disabled="" type="checkbox"/> ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì† í…ŒìŠ¤íŠ¸</li>
</ul>
<hr/>
<h2 id="--5">ì°¸ê³  ìë£Œ</h2>
<h3 id="--6">ê³µì‹ ë¬¸ì„œ</h3>
<ul>
<li><a href="https://cloud.google.com/build/docs">Cloud Build Documentation</a></li>
<li><a href="https://cloud.google.com/run/docs">Cloud Run Documentation</a></li>
<li><a href="https://docs.github.com/en/actions">GitHub Actions Documentation</a></li>
<li><a href="https://cloud.google.com/container-registry/docs">Google Container Registry</a></li>
</ul>
<h3 id="--7">ìœ ìš©í•œ ëª…ë ¹ì–´</h3>
<pre style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#57606a"># Cloud Build</span>
</span></span><span style="display:flex;"><span>gcloud builds list
</span></span><span style="display:flex;"><span>gcloud builds describe BUILD_ID
</span></span><span style="display:flex;"><span>gcloud builds log BUILD_ID --stream
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Cloud Run</span>
</span></span><span style="display:flex;"><span>gcloud run services list
</span></span><span style="display:flex;"><span>gcloud run services describe SERVICE_NAME --region<span style="color:#0550ae">=</span>REGION
</span></span><span style="display:flex;"><span>gcloud run revisions list --service<span style="color:#0550ae">=</span>SERVICE_NAME --region<span style="color:#0550ae">=</span>REGION
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Container Registry</span>
</span></span><span style="display:flex;"><span>gcloud container images list
</span></span><span style="display:flex;"><span>gcloud container images list-tags gcr.io/PROJECT_ID/IMAGE_NAME
</span></span><span style="display:flex;"><span>gcloud container images delete gcr.io/PROJECT_ID/IMAGE_NAME:TAG
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a"># Secret Manager</span>
</span></span><span style="display:flex;"><span>gcloud secrets create SECRET_NAME --data-file<span style="color:#0550ae">=</span>-
</span></span><span style="display:flex;"><span>gcloud secrets versions access latest --secret<span style="color:#0550ae">=</span>SECRET_NAME
</span></span></code></pre><hr/>
<h2 id="--8">ë¬¸ì„œ íˆìŠ¤í† ë¦¬</h2>
<ul>
<li><strong>2025-12-04:</strong> ì´ˆê¸° ë¬¸ì„œ ì‘ì„± (Cloud Build, GitHub Actions, ë¡œì»¬ ë°°í¬ ë°©ë²•)</li>
</ul>
<hr/>
<h2 id="--9">ë‹¤ìŒ ë‹¨ê³„</h2>
<ol>
<li>âœ… Cloud Build ìë™ ë°°í¬ ì„¤ì • ì™„ë£Œ</li>
<li>âœ… ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²° ì™„ë£Œ (ë³„ë„ ë¬¸ì„œ ì°¸ì¡°)</li>
<li>ğŸ“ í”„ë¡ íŠ¸ì—”ë“œ Vercel ë°°í¬ (ì§„í–‰ ì¤‘)</li>
<li>ğŸ“ í™˜ê²½ ë³€ìˆ˜ Secret Managerë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ (ì„ íƒ)</li>
<li>ğŸ“ ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼ ì„¤ì • (ì„ íƒ)</li>
</ol>
</body></html>
        </div>
    </article>

    </div>
</main>
<footer>
    Generated by <a href="https://github.com/antonmedv/gitmal">Gitmal</a>
</footer>
</body>
</html>
